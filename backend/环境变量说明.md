# Strapi 环境变量配置说明

## 如何获取 .env 文件中的值

### 方法一：使用自动生成脚本（推荐）

在 `backend` 目录下运行：

```bash
node generate-env.js
```

这个脚本会自动生成所有需要的密钥值，直接复制到 `.env` 文件即可。

### 方法二：手动生成

使用 Node.js 命令逐个生成：

```bash
# 生成 APP_KEYS（需要4个，用逗号分隔）
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# 运行4次，然后用逗号连接

# 生成 API_TOKEN_SALT
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# 生成 ADMIN_JWT_SECRET
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# 生成 TRANSFER_TOKEN_SALT
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# 生成 JWT_SECRET
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

### 方法三：使用在线工具

可以使用在线随机字符串生成器，生成至少 32 字符的随机字符串。

## .env 文件示例

创建 `backend/.env` 文件，内容如下：

```env
HOST=0.0.0.0
PORT=1337
APP_KEYS=密钥1,密钥2,密钥3,密钥4
API_TOKEN_SALT=你的API_TOKEN_SALT值
ADMIN_JWT_SECRET=你的ADMIN_JWT_SECRET值
TRANSFER_TOKEN_SALT=你的TRANSFER_TOKEN_SALT值
JWT_SECRET=你的JWT_SECRET值
```

## 各变量的作用说明

- **APP_KEYS**: Strapi 应用密钥，用于加密会话和 cookies（需要4个，用逗号分隔）
- **API_TOKEN_SALT**: API Token 的盐值，用于生成 API 令牌
- **ADMIN_JWT_SECRET**: 管理员 JWT 令牌的密钥
- **TRANSFER_TOKEN_SALT**: 传输令牌的盐值
- **JWT_SECRET**: JWT 令牌的通用密钥

## 重要提示

⚠️ **安全提示**：
- 这些密钥应该保密，不要提交到 Git 仓库
- 生产环境应该使用不同的密钥
- 如果密钥泄露，应该立即更换

